import { Policy } from "../../../src/sc";

describe("Policy Contract ABI", () => {
  const policy = new Policy();

  test("blockAccount", () => {
    const addr = "Acx6QWXVxsGPUvNqjS9zWY3SZCryq5R8bp";
    const result = policy.blockAccount(addr);
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.0300727);
  });

  test("getBlockedAccounts", () => {
    const result = policy.getBlockedAccounts();
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.0401442);
  });

  test("getFeePerByte", () => {
    const result = policy.getFeePerByte();
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.0502157);
  });

  test("getMaxTransactionsPerBlock", () => {
    const result = policy.getMaxTransactionsPerBlock();
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b00c11a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.0602872);
  });

  test("setFeePerByte", () => {
    const result = policy.setFeePerByte(1000);
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b00c11a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.0903599);
  });

  test("setMaxTransactionsPerBlock", () => {
    const result = policy.setMaxTransactionsPerBlock(10023);
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b00c11a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.1204326);
  });

  test("unblockAccount", () => {
    const addr = "Acx6QWXVxsGPUvNqjS9zWY3SZCryq5R8bp";
    const result = policy.unblockAccount(addr);
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b00c11a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10e756e626c6f636b4163636f756e746875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.1505053);
  });

  test("supportedStandards", () => {
    const result = policy.supportedStandards();
    expect(result.hex).toBe(
      "14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10c626c6f636b4163636f756e746875f4fa6b00c112676574426c6f636b65644163636f756e74736875f4fa6b00c10d676574466565506572427974656875f4fa6b00c11a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b14e849739c4d7711fed5a4e27fa3d5ae950038d04951c10e756e626c6f636b4163636f756e746875f4fa6b00c112737570706f727465645374616e64617264736875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.1505768);
  });
});
