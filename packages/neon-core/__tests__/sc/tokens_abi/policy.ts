import { Policy } from "../../../src/sc";

describe("Policy Contract ABI", () => {
  const policy = new Policy();

  test("blockAccount", () => {
    const addr = "Acx6QWXVxsGPUvNqjS9zWY3SZCryq5R8bp";
    const result = policy.blockAccount(addr);
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.03);
  });

  test("getBlockedAccounts", () => {
    const result = policy.getBlockedAccounts();
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.01);
  });

  test("getFeePerByte", () => {
    const result = policy.getFeePerByte();
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.01);
  });

  test("getMaxTransactionsPerBlock", () => {
    const result = policy.getMaxTransactionsPerBlock();
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b001a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.01);
  });

  test("setFeePerByte", () => {
    const result = policy.setFeePerByte(1000);
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b001a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.03);
  });

  test("setMaxTransactionsPerBlock", () => {
    const result = policy.setMaxTransactionsPerBlock(10023);
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b001a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.03);
  });

  test("unblockAccount", () => {
    const addr = "Acx6QWXVxsGPUvNqjS9zWY3SZCryq5R8bp";
    const result = policy.unblockAccount(addr);
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b001a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10e756e626c6f636b4163636f756e746875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0.03);
  });

  test("supportedStandards", () => {
    const result = policy.supportedStandards();
    expect(result.hex).toBe(
      "1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10c626c6f636b4163636f756e746875f4fa6b0012676574426c6f636b65644163636f756e74736875f4fa6b000d676574466565506572427974656875f4fa6b001a6765744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b02e80351c10d736574466565506572427974656875f4fa6b02272751c11a7365744d61785472616e73616374696f6e73506572426c6f636b6875f4fa6b1449d0380095aed5a37fe2a4d5fe11774d9c7349e851c10e756e626c6f636b4163636f756e746875f4fa6b0012737570706f727465645374616e64617264736875f4fa6b"
    );
    expect(result.fee.toNumber()).toBe(0);
  });
});
